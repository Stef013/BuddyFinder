(this.webpackJsonpbuddyfinder=this.webpackJsonpbuddyfinder||[]).push([[0],{50:function(e,t,a){e.exports=a(92)},55:function(e,t,a){},84:function(e,t){},92:function(e,t,a){"use strict";a.r(t);var s=a(0),n=a.n(s),l=a(17),r=a.n(l),o=(a(55),a(9)),i=a(10),c=a(13),d=a(11),u=a(1),m=a(12),g=a(3),h=a.n(g),b=function(e){function t(){var e;return Object(o.a)(this,t),(e=Object(c.a)(this,Object(d.a)(t).call(this))).redirectToHome=function(){e.props.history.push({pathname:"/home"})},e.state={loggedInUser:null,loginVisible:!0,registerVisible:!1},window.sessionStorage.removeItem("loggedinuser"),e.sendLoginRequest=e.sendLoginRequest.bind(Object(u.a)(e)),e.sendSignUpRequest=e.sendSignUpRequest.bind(Object(u.a)(e)),e.login=e.login.bind(Object(u.a)(e)),e.signUp=e.signUp.bind(Object(u.a)(e)),e}return Object(m.a)(t,e),Object(i.a)(t,[{key:"switchContainers",value:function(){this.setState({loginVisible:!this.state.loginVisible,registerVisible:!this.state.registerVisible})}},{key:"login",value:function(){var e=document.getElementById("usernameBox").value,t=document.getElementById("passwordBox").value;e&&t?this.sendLoginRequest(e,t):alert("Login fields cannot be empty!")}},{key:"signUp",value:function(){var e=document.getElementById("suUsernameBox").value,t=document.getElementById("suPasswordBox").value,a=document.getElementById("suConfirmPasswordBox").value;e&&t&&a?t!==a?alert("Passwords do not match!"):this.sendSignUpRequest(e,t):alert("Sign Up fields cannot be empty!")}},{key:"sendLoginRequest",value:function(e,t){var a=this;h.a.post("http://145.93.112.246:4567/user/login/",{username:e,password:t}).then((function(e){console.log(e),console.log(e.data),e.data?(a.setState((function(){return{loggedInUser:e.data}})),window.sessionStorage.setItem("loggedinuser",JSON.stringify(a.state.loggedInUser)),window.sessionStorage.setItem("isloggedin","true"),a.redirectToHome()):alert("Wrong username or password.")}))}},{key:"sendSignUpRequest",value:function(e,t){h.a.post("http://localhost:4567/user",{username:e,password:t}).then((function(e){console.log(e),console.log(e.data),e.data?(alert("Account has been created!"),window.location.reload()):alert("Username is already taken")}))}},{key:"render",value:function(){var e=this;return n.a.createElement("div",{className:"App"},n.a.createElement("div",{className:"topnav"},n.a.createElement("a",{href:"/"},"Login"),n.a.createElement("a",{href:"/contact"},"Contact"),n.a.createElement("a",{href:"#"},"About"),n.a.createElement("div",{className:"homebutton",onClick:this.refresh},"BuddyFinder")),n.a.createElement("div",{className:"content"},n.a.createElement("div",{className:"title1"},"BuddyFinder"),n.a.createElement("div",{className:"titletext"},n.a.createElement("center",null,n.a.createElement("p",null,"Find buddies for your favorite activities!"))),n.a.createElement("div",{className:"container",id:"loginContainer",style:{display:this.state.loginVisible?"block":"none"}},n.a.createElement("center",null,n.a.createElement("div",{className:"logintext"},"Login"),n.a.createElement("input",{type:"text",placeholder:"Enter Username",name:"uname",id:"usernameBox",required:!0}),n.a.createElement("br",null),n.a.createElement("input",{type:"password",placeholder:"Enter Password",name:"psw",id:"passwordBox",required:!0}),n.a.createElement("br",null),n.a.createElement("button",{className:"loginbutton",onClick:this.login},"Login"),n.a.createElement("br",null),n.a.createElement("div",{className:"text1"},"Don't have an account? Sign up now!"),n.a.createElement("div",{className:"button1",onClick:function(){return e.switchContainers()}},"Sign up"))),n.a.createElement("div",{className:"container",id:"registerContainer",style:{display:this.state.registerVisible?"block":"none"}},n.a.createElement("center",null,n.a.createElement("div",null,n.a.createElement("div",{className:"backLink",onClick:function(){return e.switchContainers()}}," ","<back"," "),n.a.createElement("div",{className:"registertext"},"Sign up")),n.a.createElement("input",{type:"text",placeholder:"Enter Username",name:"uname",id:"suUsernameBox",required:!0}),n.a.createElement("br",null),n.a.createElement("input",{type:"password",placeholder:"Enter Password",name:"psw",id:"suPasswordBox",required:!0}),n.a.createElement("br",null),n.a.createElement("input",{type:"password",placeholder:"Confirm Password",name:"psw",id:"suConfirmPasswordBox",required:!0}),n.a.createElement("br",null),n.a.createElement("button",{className:"loginbutton",onClick:this.signUp},"Register")))),n.a.createElement("footer",null,n.a.createElement("div",{className:"footertext"},n.a.createElement("p",null,"Created by Stefan Vujinovic - Official licenced product by Microsoft"))))}}]),t}(s.Component),p=a(19),f=a(20),E=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(d.a)(t).call(this,e))).refresh=function(){window.location.reload()},a.redirectToNewProfile=function(){a.props.history.push({pathname:"/newprofile"})},a.redirectToProfile=function(e){a.props.history.push({pathname:"/profile/"+e.username})},a.toggle=function(e,t,s){return function(n){a.setState({message:s}),a.setState((function(a){return Object(p.a)({},e,t)}))}},a.loadMatches=function(e){if(e.state.matches.length>0)return e.state.matches.map((function(t){return n.a.createElement("div",{className:"matchesbutton",onClick:function(){return e.redirectToProfile(t)}},n.a.createElement("div",{className:"dot2"}),t.username)}))},a.loadBuddies=function(e){if(e.state.buddies.length>0)return e.state.buddies.map((function(t){return n.a.createElement("div",{className:"matchesbutton",onClick:function(){return e.redirectToProfile(t)}},n.a.createElement("div",{className:"dot2"}),t.firstname,""," ",t.lastname," ")}))},a.loadMessages=function(e){if(e.state.messages.length>0)return e.state.messages.map((function(t){return t.isrequest?n.a.createElement("div",{className:"requestcontainer"},n.a.createElement("div",{className:"dot2"}),t.sendername,n.a.createElement("br",null),"wants to be your buddy!",n.a.createElement("br",null),n.a.createElement("div",{className:"acceptbutton",onClick:function(){return e.sendAcceptRequest(t.sender.userid,t.messageid)}},"Accept"),n.a.createElement("div",{className:"declinebutton",onClick:function(){return e.sendDeleteMessageRequest(t.messageid)}},"Decline")):n.a.createElement("div",{className:"messagesbutton",onClick:e.toggle("regular",!0,t)},n.a.createElement("div",{className:"dot2"}),t.sendername," sent you a message")}))},a.state={loggedInUser:null,matchVisible:!1,newProfileVisible:!1,message:null,messageid:null},a.sendfindMatchRequest=a.sendfindMatchRequest.bind(Object(u.a)(a)),a.sendGetMessageRequest=a.sendGetMessageRequest.bind(Object(u.a)(a)),a.sendDeleteMessageRequest=a.sendDeleteMessageRequest.bind(Object(u.a)(a)),a.sendMessageRequest=a.sendMessageRequest.bind(Object(u.a)(a)),a.sendMessage=a.sendMessage.bind(Object(u.a)(a)),a.redirectToProfile=a.redirectToProfile.bind(Object(u.a)(a)),a.loadMatches=a.loadMatches.bind(Object(u.a)(a)),a.loadMessages=a.loadMessages.bind(Object(u.a)(a)),a.toggle=a.toggle.bind(Object(u.a)(a)),a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){window.sessionStorage.loggedinuser?(this.state.loggedInUser=JSON.parse(window.sessionStorage.loggedinuser),this.state.loggedInUser.firstname?(this.setState({newProfileVisible:!this.state.newProfileVisible}),this.sendfindMatchRequest(),this.sendGetBuddyRequest(),this.sendGetMessageRequest()):this.setState({matchVisible:!this.state.matchVisible})):this.props.history.push({pathname:"/"})}},{key:"sendMessage",value:function(){var e=document.getElementById("messageBox").value;e?(this.setState({messageid:this.state.message.messageid}),this.sendMessageRequest(e)):alert("Message cannot be empty!")}},{key:"sendfindMatchRequest",value:function(){var e=this;h.a.post("http://localhost:4567/match/",{userid:this.state.loggedInUser.userid,hobby1:this.state.loggedInUser.hobby1,hobby2:this.state.loggedInUser.hobby2,hobby3:this.state.loggedInUser.hobby3}).then((function(t){console.log(t),console.log(t.data),0==t.data.length||e.setState({matches:t.data})}))}},{key:"sendGetMessageRequest",value:function(){var e=this;h.a.get("http://localhost:4567/message",{params:{id:this.state.loggedInUser.userid}}).then((function(t){console.log(t),console.log(t.data),0==t.data.length||e.setState({messages:t.data})}))}},{key:"sendDeleteMessageRequest",value:function(e){var t=this;h.a.delete("http://localhost:4567/message",{params:{id:e}}).then((function(e){console.log(e),console.log(e.data),e.data?(t.toggle("regular",!1,null),t.refresh()):alert("Database Error!")}))}},{key:"sendMessageRequest",value:function(e){var t=this;h.a.post("http://localhost:4567/message",{reciever:this.state.message.sender,sender:this.state.loggedInUser,sendername:this.state.loggedInUser.username,message:e,isrequest:!1}).then((function(e){console.log(e),console.log(e.data),e.data?(t.toggle("regular",!1,null),alert("The reply has been sent!"),t.sendDeleteMessageRequest(t.state.messageid)):alert("Request error!")}))}},{key:"sendGetBuddyRequest",value:function(){var e=this;h.a.get("http://localhost:4567/buddy",{params:{id:this.state.loggedInUser.userid}}).then((function(t){console.log(t),console.log(t.data),0==t.data.length||e.setState({buddies:t.data})}))}},{key:"sendAcceptRequest",value:function(e,t){var a=this;h.a.post("http://localhost:4567/buddy",{userid:this.state.loggedInUser.userid,buddyid:e,messageid:t}).then((function(e){console.log(e),console.log(e.data),e.data?(alert("Buddy request accepted!"),a.refresh()):alert("Database Error!")}))}},{key:"render",value:function(){var e=this,t=this.state.regular;return this.state.loggedInUser?n.a.createElement("div",{className:"App"},n.a.createElement("div",{className:"topnav"},n.a.createElement("a",{href:"/"},"Logoff"),n.a.createElement("a",{href:"/newprofile"},"Account"),n.a.createElement("a",{href:"/contact"},"Contact"),n.a.createElement("a",{href:"#"},"About"),n.a.createElement("div",{className:"homebutton",onClick:this.refresh},"BuddyFinder")),n.a.createElement("div",{className:"content"},n.a.createElement("div",{className:"hometext"},"Welcome ",this.state.loggedInUser.username,"!"),n.a.createElement("div",null,n.a.createElement("div",{className:"homeblock",id:"matchContainer",style:{display:this.state.matchVisible?"none":"block"}},n.a.createElement("div",{className:"logintext"},"Recent Matches"),n.a.createElement("br",null),this.state&&this.state.matches&&this.loadMatches(this)),n.a.createElement("div",{className:"homeblock",id:"buddyContainer",style:{display:this.state.matchVisible?"none":"block"}},n.a.createElement("div",{className:"logintext"},"My Buddies"),n.a.createElement("br",null),this.state&&this.state.buddies&&this.loadBuddies(this)),n.a.createElement("div",{className:"homeblock",id:"messageContainer",style:{display:this.state.matchVisible?"none":"block"}},n.a.createElement("div",{className:"logintext"},"Messages"),n.a.createElement("br",null),this.state&&this.state.messages&&this.loadMessages(this))),n.a.createElement("div",{className:"container",id:"newProfileContainer",ref:function(t){return e.newProfileref=t},style:{display:this.state.newProfileVisible?"none":""}},n.a.createElement("div",{className:"titletext"},"You need to create a profile to use this site!"),n.a.createElement("br",null),n.a.createElement("div",{className:"getstartedbutton",onClick:this.redirectToNewProfile},"Get Started >"))),this.state&&this.state.message&&n.a.createElement(f.a,{open:t,onRequestClose:this.toggle("regular",!1,null)},n.a.createElement("div",{className:"messagecontainer"},n.a.createElement("div",{className:"logintext"},"Message from ",this.state.message.sendername),n.a.createElement("div",{className:"text1"},this.state.message.message),n.a.createElement("br",null),n.a.createElement("b",null,n.a.createElement("div",{className:"text1"},"Reply:")),n.a.createElement("textarea",{placeholder:"Write message",id:"messageBox"}),n.a.createElement("br",null),n.a.createElement("div",{className:"button1",onClick:this.sendMessage},"Send"),n.a.createElement("div",{className:"deletebutton",onClick:function(){return e.sendDeleteMessageRequest(e.state.message.messageid)}},"Delete"))),n.a.createElement("footer",null,n.a.createElement("div",{className:"footertext"},n.a.createElement("p",null,"Created by Stefan Vujinovic - Official licenced product by Microsoft")))):n.a.createElement("div",{className:"loadingtext"},"Loading...")}}]),t}(n.a.Component),y=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(d.a)(t).call(this,e))).redirect=function(){a.props.history.push({pathname:"/home"})},a.state={loggedInUser:null,trigger:null},a.newProfile=a.newProfile.bind(Object(u.a)(a)),a.sendNewProfileRequest=a.sendNewProfileRequest.bind(Object(u.a)(a)),a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"componentWillMount",value:function(){window.sessionStorage.loggedinuser?(this.state.loggedInUser=JSON.parse(window.sessionStorage.loggedinuser),this.state.trigger=!0):this.props.history.push({pathname:"/"})}},{key:"newProfile",value:function(){var e=document.getElementById("firstnameBox").value,t=document.getElementById("lastnameBox").value,a=document.getElementById("countryBox").value,s=document.getElementById("cityBox").value,n=document.getElementById("aboutmeBox").value,l=document.getElementById("hobby1Box").value,r=document.getElementById("hobby2Box").value,o=document.getElementById("hobby3Box").value;e&&t&&a&&s&&l?this.sendNewProfileRequest(e,t,a,s,n,l,r,o):alert("fields cannot be empty!")}},{key:"sendNewProfileRequest",value:function(e,t,a,s,n,l,r,o){var i=this;h.a.put("http://localhost:4567/user",{userid:this.state.loggedInUser.userid,username:this.state.loggedInUser.username,password:this.state.loggedInUser.password,firstname:e,lastname:t,country:a,city:s,description:n,hobby1:l,hobby2:r,hobby3:o}).then((function(c){console.log(c),console.log(c.data),c.data?(alert("Profile has been set up!"),i.setState({loggedInUser:{firstname:e,lastname:t,country:a,city:s,description:n,hobby1:l,hobby2:r,hobby3:o}}),window.sessionStorage.setItem("loggedinuser",JSON.stringify(i.state.loggedInUser)),i.redirect()):alert("Request Error!")}))}},{key:"render",value:function(){return this.state.trigger?n.a.createElement("div",{className:"App"},n.a.createElement("div",{className:"topnav"},n.a.createElement("a",{href:"/"},"Logoff"),n.a.createElement("a",{href:"#"},"Account"),n.a.createElement("a",{href:"/contact"},"Contact"),n.a.createElement("a",{href:"#"},"About"),n.a.createElement("div",{className:"homebutton",onClick:this.redirect},"BuddyFinder")),n.a.createElement("div",{className:"content"},n.a.createElement("div",{className:"hometext"},"Profile Set-up"),n.a.createElement("center",null,n.a.createElement("div",{className:"newprofilecontainer",id:"newprofileContainer"},n.a.createElement("div",{className:"dot"},"Upload picture"),n.a.createElement("br",null),n.a.createElement("div",{className:"text1","margin-bottom":"30px"},this.state.loggedInUser.username),n.a.createElement("br",null),n.a.createElement("input",{type:"text",placeholder:"First name",name:"fname",id:"firstnameBox",required:!0}),n.a.createElement("input",{type:"text",placeholder:"Last name",name:"lname",id:"lastnameBox",required:!0}),n.a.createElement("br",null),n.a.createElement("input",{type:"text",placeholder:"Country",name:"country",id:"countryBox",required:!0}),n.a.createElement("input",{type:"text",placeholder:"City",name:"city",id:"cityBox",required:!0}),n.a.createElement("br",null),n.a.createElement("textarea",{placeholder:"About me:",id:"aboutmeBox"}),n.a.createElement("input",{type:"text",placeholder:"Hobby1",name:"hobby1",id:"hobby1Box",required:!0}),n.a.createElement("input",{type:"text",placeholder:"Hobby2 (Optional)",name:"hobby2",id:"hobby2Box",required:!0}),n.a.createElement("br",null),n.a.createElement("input",{type:"text",placeholder:"Hobby3 (Optional)",name:"hobby3",id:"hobby3Box",required:!0}),n.a.createElement("br",null),n.a.createElement("div",{className:"loginbutton",onClick:this.newProfile}," Save"),n.a.createElement("br",null)))),n.a.createElement("div",{className:"footer2"},n.a.createElement("div",{className:"footertext"},n.a.createElement("p",null,"Created by Stefan Vujinovic - Official licenced product by Microsoft")))):n.a.createElement("div",{className:"loadingtext"},"Loading...")}}]),t}(n.a.Component),v=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(d.a)(t).call(this,e))).toggle=function(e,t){return function(s){a.setState((function(a){return Object(p.a)({},e,t)}))}},a.redirect=function(){a.props.history.push({pathname:"/home"})},a.state={profileUser:null,loggedInUser:null,regular:!1,isBuddy:null},a.sendGetProfileRequest=a.sendGetProfileRequest.bind(Object(u.a)(a)),a.sendBuddyRequest=a.sendBuddyRequest.bind(Object(u.a)(a)),a.sendMessageRequest=a.sendMessageRequest.bind(Object(u.a)(a)),a.sendMessage=a.sendMessage.bind(Object(u.a)(a)),a.toggle=a.toggle.bind(Object(u.a)(a)),a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){if(window.sessionStorage.loggedinuser){this.state.loggedInUser=JSON.parse(window.sessionStorage.loggedinuser);var e=this.props.match.params.id;this.sendGetProfileRequest(e)}else this.props.history.push({pathname:"/"})}},{key:"sendMessage",value:function(){var e=document.getElementById("messageBox").value;e?this.sendMessageRequest(e):alert("Message cannot be empty!")}},{key:"sendGetProfileRequest",value:function(e){var t=this;h.a.get("http://localhost:4567/user",{params:{id:e}}).then((function(e){console.log(e),console.log(e.data),e.data?(t.setState({profileUser:e.data}),t.sendCheckBuddyRequest()):alert("No profile found!")}))}},{key:"sendCheckBuddyRequest",value:function(){var e=this;h.a.get("http://localhost:4567/buddy/check",{params:{userid:this.state.loggedInUser.userid,profileid:this.state.profileUser.userid}}).then((function(t){console.log(t),console.log(t.data),t.data?e.setState({isBuddy:"none"}):e.setState({isBuddy:"inline-block"})}))}},{key:"sendBuddyRequest",value:function(){h.a.post("http://localhost:4567/message",{reciever:this.state.profileUser,sender:this.state.loggedInUser,sendername:this.state.loggedInUser.username,message:null,isrequest:!0}).then((function(e){console.log(e),console.log(e.data),e.data?alert("Request has been sent!"):alert("Request error!")}))}},{key:"sendMessageRequest",value:function(e){h.a.post("http://localhost:4567/message",{reciever:this.state.profileUser,sender:this.state.loggedInUser,sendername:this.state.loggedInUser.username,message:e,isrequest:!1}).then((function(e){console.log(e),console.log(e.data),e.data?alert("The message has been sent!"):alert("Request error!")}))}},{key:"render",value:function(){var e=this,t=this.state.regular;return this.state.isBuddy?n.a.createElement("div",{className:"App"},n.a.createElement("div",{className:"topnav"},n.a.createElement("a",{href:"/"},"Logoff"),n.a.createElement("a",{href:"#"},"Account"),n.a.createElement("a",{href:"/contact"},"Contact"),n.a.createElement("a",{href:"#"},"About"),n.a.createElement("div",{className:"homebutton",onClick:this.redirect},"BuddyFinder")),n.a.createElement("div",{className:"content"},n.a.createElement("div",{className:"profilecontainer"},n.a.createElement("center",null,n.a.createElement("div",{className:"dot3"}),n.a.createElement("div",{className:"profilenametext"},this.state.profileUser.username),n.a.createElement("div",{className:"text2"},this.state.profileUser.city,", ",this.state.profileUser.country," "),n.a.createElement("br",null),n.a.createElement("div",null,n.a.createElement("div",{className:"acceptbutton",id:"addbuddyButton",onClick:this.sendBuddyRequest,style:{display:this.state.isBuddy}},"+ Buddy"),n.a.createElement("div",{className:"button1",onClick:this.toggle("regular",!0)},"Message")),n.a.createElement("br",null),n.a.createElement("div",{className:"text1"},n.a.createElement("b",null,"About me:"),n.a.createElement("p",null,this.state.profileUser.description)),n.a.createElement("br",null),n.a.createElement("b",null,n.a.createElement("div",{className:"text1"},"Hobby's:")),n.a.createElement("div",{className:"hobbytext"},this.state.profileUser.hobby1),n.a.createElement("div",{className:"hobbytext"},this.state.profileUser.hobby2),n.a.createElement("div",{className:"hobbytext"},this.state.profileUser.hobby3),n.a.createElement("br",null),n.a.createElement("br",null))),n.a.createElement(f.a,{open:t,onRequestClose:this.toggle("regular",!1)},n.a.createElement("div",{className:"messagecontainer"},n.a.createElement("div",{className:"logintext"},"Send message to ",this.state.profileUser.username),n.a.createElement("textarea",{placeholder:"Write message",id:"messageBox"}),n.a.createElement("br",null),n.a.createElement("button",{className:"loginbutton",onClick:function(t){e.toggle("regular",!1),e.sendMessage(t)}},"Send"))),n.a.createElement("footer",null,n.a.createElement("div",{className:"footertext"},n.a.createElement("p",null,"Created by Stefan Vujinovic - Official licenced product by Microsoft"))))):n.a.createElement("div",{className:"loadingtext"},"Loading...")}}]),t}(n.a.Component),N=a(46),x=a(14),q=(a(87),a(88),n.a.createElement(N.a,null,n.a.createElement("div",null,n.a.createElement(x.a,{exact:!0,path:"/",component:b}),n.a.createElement(x.a,{path:"/home",component:E}),n.a.createElement(x.a,{path:"/newprofile",component:y}),n.a.createElement(x.a,{path:"/profile/:id",component:v}))));r.a.render(q,document.getElementById("root"))}},[[50,1,2]]]);
//# sourceMappingURL=main.b7bcad2b.chunk.js.map